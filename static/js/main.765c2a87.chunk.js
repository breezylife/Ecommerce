(this.webpackJsonpecommerce=this.webpackJsonpecommerce||[]).push([[0],{150:function(e,t,c){},463:function(e,t,c){"use strict";c.r(t);var n=c(2),r=c(88),a=c.n(r),s=c(5),o=c(7),i=c(21),l=c(3),d=c(4),j="http://localhost:8000/api",u=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},b=c(0),m=function(e,t){return e.location.pathname===t?{color:"#ff9900"}:{color:"#ffffff"}},h=Object(o.g)((function(e){var t=e.history;return Object(b.jsx)("div",{children:Object(b.jsxs)("ul",{className:"nav nav-tabs bg-primary",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(s.b,{className:"nav-link",style:m(t,"/"),to:"/",children:"Home"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(s.b,{className:"nav-link",style:m(t,"/shop"),to:"/shop",children:"Shop"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(s.b,{className:"nav-link",style:m(t,"/cart"),to:"/cart",children:["Cart ",Object(b.jsx)("sup",{children:Object(b.jsx)("small",{className:"cart-badge",children:"undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0})})]})}),u()&&0===u().user.role&&Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(s.b,{className:"nav-link",style:m(t,"/user/dashboard"),to:"/user/dashboard",children:"Dashboard"})}),u()&&1===u().user.role&&Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(s.b,{className:"nav-link",style:m(t,"/admin/dashboard"),to:"/admin/dashboard",children:"Dashboard"})}),!u()&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(s.b,{className:"nav-link",style:m(t,"/Signin"),to:"/Signin",children:"Signin"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(s.b,{className:"nav-link",style:m(t,"/Signup"),to:"/Signup",children:"Signup"})})]}),u()&&Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)("span",{className:"nav-link",style:{cursor:"pointer",color:"#ffffff"},onClick:function(){return function(e){if("undefined"!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("".concat(j,"/signout"),{method:"GET"}).then((function(e){console.log("signout",e)})).catch((function(e){return console.log(e)}))}((function(){t.push("/")}))},children:"Signout"})})]})})})),O=(c(150),function(e){var t=e.title,c=void 0===t?"":t,n=e.description,r=void 0===n?"":n,a=e.className,s=e.children;return Object(b.jsxs)("div",{children:[Object(b.jsx)(h,{}),Object(b.jsxs)("div",{className:"jumbotron",children:[Object(b.jsx)("h2",{children:c}),Object(b.jsx)("p",{className:"lead",children:r})]}),Object(b.jsx)("div",{className:a,children:s})]})}),p=(c(151),function(){var e=Object(n.useState)({email:"ps102646@gmail.com",password:"ps102640",error:"",loading:!1,redirectToReferrer:!1}),t=Object(d.a)(e,2),c=t[0],r=t[1],a=c.email,s=c.password,m=c.loading,h=c.error,p=c.redirectToReferrer,f=u().user,x=function(e){return function(t){r(Object(l.a)(Object(l.a)({},c),{},Object(i.a)({error:!1},e,t.target.value)))}},g=function(e){e.preventDefault(),r(Object(l.a)(Object(l.a)({},c),{},{error:!1,loading:!0})),function(e){return fetch("".concat(j,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}({email:a,password:s}).then((function(e){e.error?r(Object(l.a)(Object(l.a)({},c),{},{error:e.error,loading:!1})):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){r(Object(l.a)(Object(l.a)({},c),{},{redirectToReferrer:!0}))}))}))};return Object(b.jsxs)(O,{title:"Signin Page",description:"React",className:"container col-md-8 offset-md-2",children:[m&&Object(b.jsx)("div",{className:"alert alert-info",children:Object(b.jsx)("h2",{children:"loading..."})}),Object(b.jsx)("div",{className:"alert alert-danger",style:{display:h?"":"none"},children:h}),Object(b.jsxs)("form",{children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Email"}),Object(b.jsx)("input",{type:"email",value:a,onChange:x("email"),className:"form-control"})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Password"}),Object(b.jsx)("input",{type:"password",value:s,onChange:x("password"),className:"form-control"})]}),Object(b.jsx)("button",{onClick:g,className:"btn btn-primary",children:"Submit"})]}),p?f&&1===f.role?Object(b.jsx)(o.a,{to:"/admin/dashboard"}):Object(b.jsx)(o.a,{to:"/user/dashboard"}):u()?Object(b.jsx)(o.a,{to:"/"}):void 0]})}),f=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(d.a)(e,2),c=t[0],r=t[1],a=c.name,o=c.email,u=c.password,m=c.success,h=c.error,p=function(e){return function(t){r(Object(l.a)(Object(l.a)({},c),{},Object(i.a)({error:!1},e,t.target.value)))}},f=function(e){var t;e.preventDefault(),r(Object(l.a)(Object(l.a)({},c),{},{error:!1})),(t={name:a,email:o,password:u},fetch("".concat(j,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))).then((function(e){e.error?r(Object(l.a)(Object(l.a)({},c),{},{error:e.error,success:!1})):r(Object(l.a)(Object(l.a)({},c),{},{name:"",email:"",password:"",error:"",success:!0}))}))};return Object(b.jsxs)(O,{title:"Signup Page",description:"React",className:"container col-md-8 offset-md-2",children:[Object(b.jsxs)("div",{className:"alert alert-info",style:{display:m?"":"none"},children:["New account is created. Please ",Object(b.jsx)(s.b,{to:"/signin",children:"signin"})]}),Object(b.jsx)("div",{className:"alert alert-danger",style:{display:h?"":"none"},children:h}),Object(b.jsxs)("form",{children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Name"}),Object(b.jsx)("input",{type:"text",value:a,onChange:p("name"),className:"form-control"})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Email"}),Object(b.jsx)("input",{type:"email",value:o,onChange:p("email"),className:"form-control"})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Password"}),Object(b.jsx)("input",{type:"password",value:u,onChange:p("password"),className:"form-control"})]}),Object(b.jsx)("button",{onClick:f,className:"btn btn-primary",children:"Submit"})]})]})},x=c(60),g=function(e){var t=e.component,c=Object(x.a)(e,["component"]);return Object(b.jsx)(o.b,Object(l.a)(Object(l.a)({},c),{},{render:function(e){return u()?Object(b.jsx)(t,Object(l.a)({},e)):Object(b.jsx)(o.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},N=function(e){var t=e.component,c=Object(x.a)(e,["component"]);return Object(b.jsx)(o.b,Object(l.a)(Object(l.a)({},c),{},{render:function(e){return u()&&1===u().user.role?Object(b.jsx)(t,Object(l.a)({},e)):Object(b.jsx)(o.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},v=function(){var e=u().user,t=(e._id,e.name),c=e.email,n=e.role;return Object(b.jsx)(O,{title:"Dashboard",description:"Hello ".concat(t,"!"),className:"container",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-3",children:Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("h4",{className:"card-header",children:"User Links"}),Object(b.jsxs)("ul",{className:"list-group",children:[Object(b.jsx)("li",{className:"list-group-item",children:Object(b.jsx)(s.b,{className:"nav-link",to:"/cart",children:"My Cart"})}),Object(b.jsx)("li",{className:"list-group-item",children:Object(b.jsx)(s.b,{className:"nav-link",to:"/profile/update",children:"Update Profile"})})]})]})}),Object(b.jsxs)("div",{className:"col-9",children:[Object(b.jsxs)("div",{className:"card mb-5",children:[Object(b.jsx)("h3",{className:"card-header",children:"User Information"}),Object(b.jsxs)("ul",{className:"list-group",children:[Object(b.jsx)("li",{className:"list-group-item",children:t}),Object(b.jsx)("li",{className:"list-group-item",children:c}),Object(b.jsx)("li",{className:"list-group-item",children:1===n?"Admin":"Registerd User"})]})]}),Object(b.jsxs)("div",{className:"card mb-5",children:[Object(b.jsx)("h3",{className:"card-header",children:"Purchase history"}),Object(b.jsx)("ul",{className:"list-group",children:Object(b.jsx)("li",{className:"list-group-item",children:"history"})})]})]})]})})},y=function(){var e=u().user,t=(e._id,e.name),c=e.email,n=e.role;return Object(b.jsx)(O,{title:"Dashboard",description:"Hello ".concat(t,"!"),className:"container",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-3",children:[" ",Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("h4",{className:"card-header",children:"Admin Links"}),Object(b.jsxs)("ul",{className:"list-group",children:[Object(b.jsx)("li",{className:"list-group-item",children:Object(b.jsx)(s.b,{className:"nav-link",to:"/create/category",children:"Create Category"})}),Object(b.jsx)("li",{className:"list-group-item",children:Object(b.jsx)(s.b,{className:"nav-link",to:"/create/product",children:"Create Product"})}),Object(b.jsx)("li",{className:"list-group-item",children:Object(b.jsx)(s.b,{className:"nav-link",to:"/admin/orders",children:"View Orders"})})]})]})," "]}),Object(b.jsxs)("div",{className:"col-9",children:[" ",Object(b.jsxs)("div",{className:"card mb-5",children:[Object(b.jsx)("h3",{className:"card-header",children:"User Information"}),Object(b.jsxs)("ul",{className:"list-group",children:[Object(b.jsx)("li",{className:"list-group-item",children:t}),Object(b.jsx)("li",{className:"list-group-item",children:c}),Object(b.jsx)("li",{className:"list-group-item",children:1===n?"Admin":"Registerd User"})]})]})," "]})]})})},S=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(!1),o=Object(d.a)(a,2),i=o[0],l=o[1],m=Object(n.useState)(!1),h=Object(d.a)(m,2),p=h[0],f=h[1],x=u(),g=x.user,N=x.token,v=function(e){l(""),r(e.target.value)},y=function(e){e.preventDefault(),l(""),f(!1),function(e,t,c){return fetch("".concat(j,"/category/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(g._id,N,{name:c}).then((function(e){e.error?l(e.error):(l(""),f(!0))}))};return Object(b.jsx)(O,{title:"Add a new category",description:"Hello ".concat(g.name,", ready to add a new category"),children:Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-md-8 offset-md-2",children:[function(){if(p)return Object(b.jsxs)("h3",{className:"text-success",children:[c," is created"]})}(),function(){if(i)return Object(b.jsx)("h3",{className:"text-danger",children:"Category is should be unique"})}(),Object(b.jsxs)("form",{onSubmit:y,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Name"}),Object(b.jsx)("input",{type:"text",className:"form-control",onChange:v,value:c,autoFocus:!0})]}),Object(b.jsx)("button",{className:"btn btn-outline-primary",children:"Create Category"})]}),Object(b.jsx)("div",{className:"mt-5",children:Object(b.jsx)(s.b,{to:"/admin/dashboard",className:"text-warning",children:"Back to Dashboard"})})]})})})},w=function(){var e=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:"",createdProduct:"",redirectToProfile:!1,formData:""}),t=Object(d.a)(e,2),c=t[0],r=t[1],a=u(),s=a.user,o=a.token,m=c.name,h=c.description,p=c.price,f=c.categories,x=c.quantity,g=c.loading,N=c.error,v=c.createdProduct,y=c.formData,S=function(){fetch("".concat(j,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?r(Object(l.a)(Object(l.a)({},c),{},{error:e.error})):r(Object(l.a)(Object(l.a)({},c),{},{categories:e,formData:new FormData}))}))};Object(n.useEffect)((function(){S()}),[]);var w=function(e){return function(t){var n="photo"===e?t.target.files[0]:t.target.value;y.set(e,n),r(Object(l.a)(Object(l.a)({},c),{},Object(i.a)({},e,n)))}},k=function(e){e.preventDefault(),r(Object(l.a)(Object(l.a)({},c),{},{error:"",loading:!0})),function(e,t,c){return fetch("".concat(j,"/product/create/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:c}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(s._id,o,y).then((function(e){e.error?r(Object(l.a)(Object(l.a)({},c),{},{error:e.error})):r(Object(l.a)(Object(l.a)({},c),{},{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,createdProduct:e.name}))}))};return Object(b.jsx)(O,{title:"Add a new product",description:"Hello ".concat(s.name,", ready to add a new product"),children:Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-md-8 offset-md-2",children:[g&&Object(b.jsx)("div",{className:"alert alert-success",children:Object(b.jsx)("h2",{children:"loading..."})}),Object(b.jsx)("div",{className:"alert alert-info",style:{display:v?"":"none"},children:Object(b.jsxs)("h2",{children:["".concat(v)," is created !"]})}),Object(b.jsx)("div",{className:"alert alert-danger",style:{display:N?"":"none"},children:N}),Object(b.jsxs)("form",{onSubmit:k,className:"mb-3",children:[Object(b.jsx)("h4",{children:"Post Photo"}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("label",{className:"btn btn-secondary",children:Object(b.jsx)("input",{onChange:w("photo"),type:"file",name:"photo",accept:"image/*"})})}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Name"}),Object(b.jsx)("input",{onChange:w("name"),type:"text",className:"form-control",value:m})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Description"}),Object(b.jsx)("textarea",{onChange:w("description"),className:"form-control",value:h})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Price"}),Object(b.jsx)("input",{onChange:w("price"),type:"number",className:"form-control",value:p})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Category"}),Object(b.jsxs)("select",{onChange:w("category"),className:"form-control",children:[Object(b.jsx)("option",{children:"Please select"}),f&&f.map((function(e,t){return Object(b.jsx)("option",{value:e._id,children:e.name},t)}))]})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Shipping"}),Object(b.jsxs)("select",{onChange:w("shipping"),className:"form-control",children:[Object(b.jsx)("option",{value:"0",children:"No"}),Object(b.jsx)("option",{value:"1",children:"Yes"})]})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Quantity"}),Object(b.jsx)("input",{onChange:w("quantity"),type:"number",className:"form-control",value:x})]}),Object(b.jsx)("button",{className:"btn btn-outline-primary",children:"Create Product"})]})]})})})},k=c(59),C=c.n(k),T=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)([]),s=Object(d.a)(a,2),o=s[0],i=s[1],l=u(),m=l.user,h=l.token,p=function(){(function(e,t){return fetch("".concat(j,"/order/list/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(m._id,h).then((function(e){e.error?console.log(e.error):r(e)}))},f=function(){(function(e,t){return fetch("".concat(j,"/order/status-values/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(m._id,h).then((function(e){e.error?console.log(e.error):i(e)}))};Object(n.useEffect)((function(){p(),f()}),[]);var x=function(e,t){return Object(b.jsxs)("div",{className:"input-group mb-2 mr-sm-2",children:[Object(b.jsx)("div",{className:"input-group-prepend",children:Object(b.jsx)("div",{className:"input-group-text",children:e})}),Object(b.jsx)("input",{type:"text",value:t,className:"form-control",readOnly:!0})]})},g=function(e,t){(function(e,t,c,n){return fetch("".concat(j,"/order/").concat(c,"/status/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({status:n,orderId:c})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(m._id,h,t,e.target.value).then((function(e){e.error?console.log(e.error):p()}))},N=function(e){return Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsxs)("h3",{className:"mark mb-4",children:["Status : ",e.status]}),Object(b.jsxs)("select",{className:"form-control",onChange:function(t){return g(t,e._id)},children:[Object(b.jsx)("option",{children:"Update Status"}),o.map((function(e,t){return Object(b.jsx)("option",{value:e,children:e},t)}))]})]})};return Object(b.jsx)(O,{title:"Add a new category",description:"Hello ".concat(m.name,",you can manage all the orders here."),children:Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-md-8 offset-md-2",children:[function(e){return e.length>0?Object(b.jsxs)("h1",{className:"text-danger display-2",children:["Total orders: ",e.length]}):Object(b.jsx)("h1",{className:"text-danger",children:"No orders"})}(c),c.map((function(e,t){return Object(b.jsxs)("div",{className:"mt-5",style:{borderBottom:"5px solid indigo"},children:[Object(b.jsx)("h2",{className:"mb-5",children:Object(b.jsxs)("span",{className:"bg-primary",children:["Order ID : ",e._id]})}),Object(b.jsxs)("ul",{className:"list-group mb-2",children:[Object(b.jsx)("li",{className:"list-group-item",children:N(e)}),Object(b.jsxs)("li",{className:"list-group-item",children:["Transaction ID : ",e.transaction_id]}),Object(b.jsxs)("li",{className:"list-group-item",children:["Amount : ",e.amount]}),Object(b.jsxs)("li",{className:"list-group-item",children:["Ordered by : ",e.user.name]}),Object(b.jsxs)("li",{className:"list-group-item",children:["Ordered on : ",C()(e.createdAt).fromNow()]}),Object(b.jsxs)("li",{className:"list-group-item",children:["Delivery address :\u3000",e.address]})]}),Object(b.jsxs)("h3",{className:"mt-4 mb-4 font-italic",children:["Total product in the order : ",e.products.length]}),e.products.map((function(e,t){return Object(b.jsxs)("div",{className:"mb-4",style:{padding:"20px",border:"1px solid indigo"},children:[x("Product name",e.name),x("Product price",e.price),x("Product total",e.count),x("Product Id",e._id)]},t)}))]},t)}))]})})})},P=c(139),A=c.n(P),_=function(e){return fetch("".concat(j,"/products?sortBy=").concat(e,"&order=desc&limit=6"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},I=function(){return fetch("".concat(j,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},E=function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={skip:e,limit:t,filters:c};return fetch("".concat(j,"/products/by/search"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},B=function(e){var t=e.item,c=e.url;return Object(b.jsx)("div",{className:"product-img",children:Object(b.jsx)("img",{src:"".concat(j,"/").concat(c,"/photo/").concat(t._id),alt:t.name,className:"mb-3",style:{maxHeight:"100%",maxWidth:"100%"}})})},D=function(e){var t,c=e.product,r=e.showViewProductButton,a=void 0===r||r,i=e.showAddToCartButton,j=void 0===i||i,u=e.cartUpdate,m=void 0!==u&&u,h=e.showRemoveProductButton,O=void 0!==h&&h,p=e.setRun,f=void 0===p?function(e){return e}:p,x=e.run,g=void 0===x?void 0:x,N=Object(n.useState)(!1),v=Object(d.a)(N,2),y=v[0],S=v[1],w=function(){!function(e,t){var c=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.push(Object(l.a)(Object(l.a)({},e),{},{count:1})),c=Array.from(new Set(c.map((function(e){return e._id})))).map((function(e){return c.find((function(t){return t._id===e}))})),localStorage.setItem("cart",JSON.stringify(c)),t())}(c,(function(){S(!0)}))},k=function(e){return function(t){f(!g),t.target.value>=1&&function(e,t){var c=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.map((function(n,r){n._id===e&&(c[r].count=t)})),localStorage.setItem("cart",JSON.stringify(c)))}(e,Number(t.target.value))}};return Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("div",{className:"card-header name",children:c.name}),Object(b.jsxs)("div",{className:"card-body",children:[function(e){if(e)return Object(b.jsx)(o.a,{to:"/cart"})}(y),Object(b.jsx)(B,{item:c,url:"product"}),Object(b.jsx)("p",{className:"lead mt-2",children:c.description.substring(0,50)}),Object(b.jsxs)("p",{className:"black-10",children:["$",c.price]}),Object(b.jsxs)("p",{className:"black-9",children:["Category:",c.category&&c.category.name]}),Object(b.jsxs)("p",{className:"black-8",children:["Added on ",C()(c.createdAt).fromNow()]}),(t=c.quantity,t>0?Object(b.jsx)("span",{className:"badge badge-primary badge-pill",children:"In Stock"}):Object(b.jsx)("span",{className:"badge badge-primary badge-pill",children:"Out of Stock"})),Object(b.jsx)("br",{}),function(e){return e&&Object(b.jsx)(s.b,{to:"/product/".concat(c._id),className:"mr-2",children:Object(b.jsx)("button",{className:"btn btn-outline-primary mt-2 mb-2",children:"View Product"})})}(a),function(e){return e&&Object(b.jsx)("button",{className:"btn btn-outline-warning mt-2 mb-2",onClick:w,children:"Add to cart"})}(j),function(e){return e&&Object(b.jsx)("button",{className:"btn btn-outline-danger mt-2 mb-2",onClick:function(){!function(e){var t=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(c,n){c._id===e&&t.splice(n,1)})),localStorage.setItem("cart",JSON.stringify(t)))}(c._id),f(!g)},children:"Remove Product"})}(O),function(e){return e&&Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"input-group mb-3",children:[Object(b.jsx)("div",{className:"input-group-prepend",children:Object(b.jsx)("span",{className:"input-group-text",children:"Adjust Quantity"})}),Object(b.jsx)("input",{type:"number",className:"form-control",value:c.count,onChange:k(c._id)})]})})}(m)]})]})},J=function(){var e=Object(n.useState)({categories:[],category:"",search:"",results:[],searched:!1}),t=Object(d.a)(e,2),c=t[0],r=t[1],a=c.categories,s=c.category,o=c.search,u=c.results,m=c.searched;Object(n.useEffect)((function(){I().then((function(e){e.error?console.log(e.error):r(Object(l.a)(Object(l.a)({},e),{},{categories:e}))}))}),[]);var h=function(){o&&function(e){var t=A.a.stringify(e);return fetch("".concat(j,"/products/search?").concat(t),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({search:o||void 0,category:s}).then((function(e){e.error?console.log(e.error):r(Object(l.a)(Object(l.a)({},c),{},{results:e,searched:!0}))}))},O=function(e){e.preventDefault(),h()},p=function(e){return function(t){var n;r(Object(l.a)(Object(l.a)({},c),{},(n={},Object(i.a)(n,e,t.target.value),Object(i.a)(n,"searched",!1),n)))}},f=function(e,t){return e&&t.length>0?"Found ".concat(t.length," products"):e&&t.length<1?"No products found":void 0};return Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"container mb-3",children:Object(b.jsx)("form",{onSubmit:O,children:Object(b.jsxs)("span",{className:"input-group-text",children:[Object(b.jsxs)("div",{className:"input-group input-group-lg",children:[Object(b.jsx)("div",{className:"input-group-prepend",children:Object(b.jsxs)("select",{className:"btn mr-2",onChange:p("category"),children:[Object(b.jsx)("option",{value:"All",children:"Pick Category"}),a.map((function(e,t){return Object(b.jsx)("option",{value:e._id,children:e.name},t)}))]})}),Object(b.jsx)("input",{type:"search",className:"form-control",onChange:p("search"),placeholder:"Search by name"})]}),Object(b.jsx)("div",{className:"btn input-group-append",style:{border:"none"},children:Object(b.jsx)("button",{className:"input-group-text",children:"Search"})})]})})}),Object(b.jsx)("div",{className:"container-fluid mb-3",children:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{className:"mr-4 mb-4",children:f(m,e)}),Object(b.jsx)("div",{className:"row",children:e.map((function(e,t){return Object(b.jsx)(D,{product:e},t)}))})]})}(u)})]})},R=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)([]),s=Object(d.a)(a,2),o=s[0],i=s[1],l=Object(n.useState)(!1),j=Object(d.a)(l,2),u=(j[0],j[1]);return Object(n.useEffect)((function(){_("createdAt").then((function(e){e.error?u(e.error):i(e)})),_("sold").then((function(e){e.error?u(e.error):r(e)}))}),[]),Object(b.jsxs)(O,{title:"Home Page",description:"React",className:"container-fluid",children:[Object(b.jsx)(J,{}),Object(b.jsx)("h2",{className:"mb-4",children:"New Arrivals"}),Object(b.jsx)("div",{className:"row",children:o.map((function(e,t){return Object(b.jsx)("div",{className:"col-4 mb-3",children:Object(b.jsx)(D,{product:e})},t)}))}),Object(b.jsx)("h2",{className:"mb-4",children:"Best Sellers"}),Object(b.jsx)("div",{className:"row",children:c.map((function(e,t){return Object(b.jsx)("div",{className:"col-4 mb-3",children:Object(b.jsx)(D,{product:e})},t)}))})]})},$=c(48),z=[{_id:0,name:"Any",array:[]},{_id:1,name:"$0 to $9",array:[0,9]},{_id:2,name:"$10 to $19",array:[10,19]},{_id:3,name:"$20 to $29",array:[20,29]},{_id:4,name:"$30 to $39",array:[30,39]},{_id:5,name:"$More than $40",array:[40,1e8]}],F=function(e){var t=e.categories,c=e.handleFilters,r=Object(n.useState)([]),a=Object(d.a)(r,2),s=a[0],o=a[1],i=function(e){return function(){var t=s.indexOf(e),n=Object($.a)(s);-1===t?n.push(e):n.splice(t,1),o(n),c(n)}};return t.map((function(e,t){return Object(b.jsxs)("li",{className:"list-unstyled",children:[Object(b.jsx)("input",{type:"checkbox",className:"form-check-input",value:s.indexOf(-1===e._id),onChange:i(e._id)}),Object(b.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))},G=function(e){var t=e.prices,c=e.handleFilters,r=Object(n.useState)(0),a=Object(d.a)(r,2),s=(a[0],a[1]),o=function(e){c(e.target.value),s(e.target.value)};return t.map((function(e,t){return Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{type:"radio",className:"mr-2 ml-4",name:e,value:"".concat(e._id),onChange:o}),Object(b.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))},U=function(){var e=Object(n.useState)({filters:{category:[],price:[]}}),t=Object(d.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)([]),s=Object(d.a)(a,2),o=s[0],i=s[1],j=Object(n.useState)(!1),u=Object(d.a)(j,2),m=(u[0],u[1]),h=Object(n.useState)(6),p=Object(d.a)(h,2),f=p[0],x=(p[1],Object(n.useState)(0)),g=Object(d.a)(x,2),N=g[0],v=g[1],y=Object(n.useState)(0),S=Object(d.a)(y,2),w=S[0],k=S[1],C=Object(n.useState)([]),T=Object(d.a)(C,2),P=T[0],A=T[1],_=function(e){E(N,f,e).then((function(e){e.error?m(e.error):(A(e.data),k(e.size),v(0))}))},B=function(){var e=N+f;E(e,f,c.filters).then((function(t){t.error?m(t.error):(A([].concat(Object($.a)(P),Object($.a)(t.data))),k(t.size),v(e))}))};Object(n.useEffect)((function(){I().then((function(e){e.error?m(e.error):i(e)})),_(N,c.filters)}),[]);var J=function(e,t){var n=Object(l.a)({},c);if(n.filters[t]=e,"price"===t){var a=R(e);n.filters[t]=a}_(c.filters),r(n)},R=function(e){var t=z,c=t.find((function(t){return t._id===parseInt(e)}));return t[c._id].array};return Object(b.jsx)(O,{title:"Shop Page",description:"Search and find books of your choice",className:"container-fluid",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-4",children:[Object(b.jsx)("h4",{children:"Filter by categories"}),Object(b.jsx)("ul",{children:Object(b.jsx)(F,{categories:o,handleFilters:function(e){return J(e,"category")}})}),Object(b.jsx)("h4",{children:"Filter by prices range"}),Object(b.jsx)("div",{children:Object(b.jsx)(G,{prices:z,handleFilters:function(e){return J(e,"price")}})})]}),Object(b.jsxs)("div",{className:"col-8",children:[Object(b.jsx)("h2",{className:"mb-4",children:"Products"}),Object(b.jsx)("div",{className:"row",children:P.map((function(e,t){return Object(b.jsx)("div",{className:"col-4 mb-3",children:Object(b.jsx)(D,{product:e})},t)}))}),Object(b.jsx)("hr",{}),w>0&&w>=f&&Object(b.jsx)("button",{className:"btn btn-warning mb-5",onClick:B,children:"Load more"})]})]})})},H=function(e){var t=Object(n.useState)({}),c=Object(d.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)([]),o=Object(d.a)(s,2),i=o[0],l=o[1],u=Object(n.useState)(!1),m=Object(d.a)(u,2),h=(m[0],m[1]),p=function(e){(function(e){return fetch("".concat(j,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?h(e.error):(a(e),function(e){return fetch("".concat(j,"/products/related/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e._id).then((function(e){e.error?h(e.error):l(e)})))}))};return Object(n.useEffect)((function(){var t=e.match.params.productId;p(t)}),[e]),Object(b.jsx)(O,{title:r&&r.name,description:r&&r.description&&r.description.substring(0,100),className:"container-fluid",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-8",children:r&&r.description&&Object(b.jsx)(D,{product:r,showViewProductButton:!1},r._id)}),Object(b.jsxs)("div",{className:"col-4",children:[Object(b.jsx)("h4",{children:"Related Products"}),i.map((function(e,t){return Object(b.jsx)("div",{className:"mb-3",children:Object(b.jsx)(D,{product:e})},t)}))]})]})})},q=c(140),M=c.n(q),L=function(e){var t=e.products,c=e.setRun,r=void 0===c?function(e){return e}:c,a=e.run,o=void 0===a?void 0:a,i=Object(n.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{},address:""}),m=Object(d.a)(i,2),h=m[0],O=m[1],p=u()&&u().user._id,f=u()&&u().token,x=function(e,t){(function(e,t){return fetch("".concat(j,"/braintree/getToken/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?O(Object(l.a)(Object(l.a)({},e),{},{error:e.error})):O({clientToken:e.clientToken})}))};Object(n.useEffect)((function(){x(p,f)}),[]);var g,N,v,y=function(e){O(Object(l.a)(Object(l.a)({},h),{},{address:e.target.value}))},S=function(){return t.reduce((function(e,t){return e+t.count*t.price}),0)},w=h.address,k=function(){O({loading:!0});h.instance.requestPaymentMethod().then((function(e){console.log(e);var c={paymentMethodNonce:e.nonce,amount:S()};(function(e,t,c){return fetch("".concat(j,"/braintree/payment/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(p,f,c).then((function(c){O(Object(l.a)(Object(l.a)({},e),{},{success:c.success}));var n={products:t,transaction_id:c.transaction.id,amount:c.transaction.amount,address:w};(function(e,t,c){return fetch("".concat(j,"/order/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({order:c})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(p,f,n).then((function(e){var t;t=function(){r(!o),console.log("payment success and empty cart"),O({loading:!1,success:!0})},"undefined"!==typeof window&&(localStorage.removeItem("cart"),t())})).catch((function(e){console.log(e),O({loading:!1})}))})).catch((function(e){console.log(e),O({loading:!1})}))})).catch((function(e){console.log("dropin error:",e),O(Object(l.a)(Object(l.a)({},h),{},{error:e.message}))}))},C=function(){return Object(b.jsx)("div",{onBlur:function(){return O(Object(l.a)(Object(l.a)({},h),{},{error:""}))},children:null!==h.clientToken&&t.length>0?Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"grom-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Delivery address:"}),Object(b.jsx)("textarea",{className:"form-control",value:h.address,placeholder:"Type your delivery address here...",onChange:y})]}),Object(b.jsx)(M.a,{options:{authorization:h.clientToken,paypal:{flow:"vault"}},onInstance:function(e){return h.instance=e}}),Object(b.jsx)("button",{onClick:k,className:"btn btn-success btn-block",children:"Pay"})]}):null})};return Object(b.jsxs)("div",{children:[Object(b.jsxs)("h2",{children:["Total: $",S()]}),(v=h.loading,v&&Object(b.jsx)("h2",{children:"Loading..."})),(N=h.success,Object(b.jsx)("div",{className:"alert alert-info",style:{display:N?"":"none"},children:"Thanks! Your payment was successful!"})),(g=h.error,Object(b.jsx)("div",{className:"alert alert-danger",style:{display:g?"":"none"},children:g})),u()?Object(b.jsx)("div",{children:C()}):Object(b.jsx)(s.b,{to:"/signin",children:Object(b.jsx)("button",{className:"btn btn-primary",children:"Sign in to checkout"})})]})},V=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(!1),o=Object(d.a)(a,2),i=o[0],l=o[1];Object(n.useEffect)((function(){r("undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])}),[i]);return Object(b.jsx)(O,{title:"Shopping Cart",description:"Manage your cart items. Add remove checkout or continue shopping.",className:"container-fluid",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-6",children:c.length>0?function(e){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("h2",{children:["Your cart has ","".concat(e.length)," items"]}),Object(b.jsx)("hr",{}),e.map((function(e,t){return Object(b.jsx)(D,{product:e,showAddToCartButton:!1,cartUpdate:!0,showRemoveProductButton:!0,setRun:l,run:i},t)}))]})}(c):void s.b}),Object(b.jsxs)("div",{className:"col-6",children:[Object(b.jsx)("h2",{className:"mb-4",children:"Your cart summary"}),Object(b.jsx)("hr",{}),Object(b.jsx)(L,{products:c,setRun:l,run:i})]})]})})},Y=function(){return Object(b.jsx)(s.a,{children:Object(b.jsxs)(o.d,{children:[Object(b.jsx)(o.b,{path:"/",exact:!0,component:R}),Object(b.jsx)(o.b,{path:"/shop",exact:!0,component:U}),Object(b.jsx)(o.b,{path:"/cart",exact:!0,component:V}),Object(b.jsx)(o.b,{path:"/product/:productId",exact:!0,component:H}),Object(b.jsx)(o.b,{path:"/signin",exact:!0,component:p}),Object(b.jsx)(o.b,{path:"/signup",exact:!0,component:f}),Object(b.jsx)(g,{path:"/user/dashboard",exact:!0,component:v}),Object(b.jsx)(N,{path:"/admin/dashboard",exact:!0,component:y}),Object(b.jsx)(N,{path:"/create/category",exact:!0,component:S}),Object(b.jsx)(N,{path:"/create/product",exact:!0,component:w}),Object(b.jsx)(N,{path:"/admin/orders",exact:!0,component:T})]})})};a.a.render(Object(b.jsx)(Y,{}),document.getElementById("root"))}},[[463,1,2]]]);
//# sourceMappingURL=main.765c2a87.chunk.js.map